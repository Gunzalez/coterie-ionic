<ion-header>
  <ion-navbar>
    <ion-title>
      Pot Details
    </ion-title>

  </ion-navbar>
</ion-header>

<ion-content>

  <ion-grid>
    <ion-row>
      <ion-col col-10>
        <span class="my-label">Pot name</span>
        <span class="potName" (press)="openNameEdit()">{{ getPlanName() }}&nbsp;</span>
      </ion-col>
      <ion-col col-2>
        <span class="my-label">&nbsp;</span>
        <button ion-button full class="btn" (click)="setAmount()" *ngIf="canSetAmount()" icon-only>
          <ion-icon name="checkmark"></ion-icon>
        </button>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-10>
        <span class="my-label">Saving Amount</span>
        <!--<ion-input type="number" maxlength="4" pattern="\d{1,15}" max={{max}} min="1" [(ngModel)]="savingsAmount" class="input"></ion-input>-->
        <span class="savingAmount">
        Â£{{ getSavingsAmount() }}.00</span>
      </ion-col>
      <ion-col col-2>
        <button ion-button full class="btn" [disabled]="hasReachedMax() || isPlanInProgress()" (click)="amountPlus()" icon-only>
          <ion-icon name="add"></ion-icon>
        </button>
        <button ion-button full class="btn" [disabled]="hasReachedMin() || isPlanInProgress()" (click)="amountMinus()" icon-only>
          <ion-icon name="remove"></ion-icon>
        </button>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-12>
        <button ion-button full (click)="viewParticipants()" [disabled]="!contactsList.length" *ngIf="!isPlanInProgress()">
          <ion-icon name="md-contacts"></ion-icon>&nbsp;Add/Remove participants
        </button>
        <button ion-button full disabled *ngIf="isPlanInProgress()">
          Pot started
        </button>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-list-header class="sp-header">
    Schedule ({{schedule.length}})

    <span item-end *ngIf="isPlanInProgress()">
      Round 1
    </span>
  </ion-list-header>

  <ion-list [reorder]="reorderStatus" (ionItemReorder)="reorderItems($event)">

    <ion-item-sliding *ngFor="let participant of schedule; let index = index">

      <ion-item>
        <h2 class="name participant">{{participant.name}}</h2>
        <p *ngIf="isPlanInProgress() && awaitingCollection(participant)" class="collection">Collection due - {{ getCollection() }}</p>
        <p *ngIf="isPlanInProgress() && awaitingPayment(participant)" class="payment">Payment due</p>
        <button ion-button *ngIf="isPlanInProgress() && awaitingCollection(participant)" outline item-end>Collect</button>
        <button ion-button *ngIf="isPlanInProgress() && awaitingPayment(participant)" outline item-end>Pay</button>
      </ion-item>

      <ion-item-options side="left" *ngIf="!isPlanInProgress()">
        <button ion-button color="danger" (click)="onSwipeRemoveParticipant(participant, index)">
          <ion-icon name="trash"></ion-icon>
        </button>
        <!--<button ion-button *ngIf="isPlanInProgress() && awaitingCollection(participant)" color="secondary" (click)="onClickToCollect(participant)">-->
          <!--<ion-icon name="basket"></ion-icon>-->
        <!--</button>-->
        <!--<button ion-button *ngIf="isPlanInProgress() && awaitingPayment(participant)" color="primary" (click)="onClickToPay(participant)">-->
          <!--<ion-icon name="cash"></ion-icon>-->
        <!--</button>-->
      </ion-item-options>

    </ion-item-sliding>
  </ion-list>

  <ion-grid>
    <ion-row>
      <ion-col col-12>
        <button ion-button full [disabled]="!canStartPlan() || isPlanInProgress()" (click)="startPlan()">
          <ion-icon name="md-power"></ion-icon>&nbsp;{{ getStartButtonLabel() }}
        </button>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
